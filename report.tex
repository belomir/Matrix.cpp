% report preamble
% © 2017 Sergey Roganov <sergey@roganof.ru>
% GNU/GPL v.3+
% CC-BY-SA

\documentclass[a4paper,14pt]{extreport}

\usepackage{preamble}

\embedfile{ConsoleApplicationMatrix.cpp}
\embedfile{Matrix.h}
\embedfile{Matrix.cpp}
\embedfile{Makefile}
\embedfile{preamble.sty}
\embedfile{report.tex}

\title{Отчёт лабораторной работы}
\author{Роганов\ Сергей\ Александрович}
%\author{Роганов\ С.\,А.}
\date{2017}

\begin{document}

\makeatletter
\begin{titlepage}
	\begin{center}
		\MakeUppercase{Министерство образования и науки\protect\\
		российской федерации}
		
		\vspace{\baselineskip}
		Федеральное государственное бюджетное образовательное учреждение высшего образования\\
		«Новосибирский государственный технический университет»
		
		\vspace{\baselineskip}
		Факультет повышения квалификации
		
		\vfill{}
		\MakeUppercase{\bf Программа профессиональной переподготовки}
		
		\vspace{.5\baselineskip}
		\textbf{«Информатика, информационные системы и технологии»}
		
		\vfill{}
		\MakeUppercase{\large Лабораторная работа}
		
		\vspace{.5\baselineskip}
		по дисциплине «Объектно-ориентированный анализ и программирование»
		
		\vfill{}
		{\flushright
			Работу выполнил:\\
			{\@author}
			
			\vspace{2\baselineskip}
			Оценка работы:
			
			\vspace{2\baselineskip}
			Работу проверил:
			
			\vspace{2\baselineskip}
			\hfill\rule{.25\textwidth}{.2pt}/\hspace{.25\textwidth}/
		}
		
		\vfill{}
		Новосибирск \@date
	\end{center}
\end{titlepage}
\makeatother

\tableofcontents{}

\chapter*{Задание}
	\label{chapter:task}
	\addcontentsline{toc}{chapter}{Задание}
Контрольное задание «класс для работы с матрицами».
Задание: разработать класс «Матрица» (Matrix) для операций матричной алгебры и протестировать методы этого класса в режиме консольного приложения.

Реализовать следующие методы:

\noindent
\begin{minipage}{\textwidth}
	\vspace{1em}
	{\bf Конструктор (Matrix)}
	\flushright
	\begin{tabularx}{.95\textwidth}{lX}
		Начальные значения: & Число строк i и столбцов j.\\
		Процесс: & Создаёт объект типа Matrix с заданным числом строк и столбцов.
		Заносит число строк и столбцов в соответствующие свойства I и J.\\
	\end{tabularx}
\end{minipage}

\noindent
\begin{minipage}{\textwidth}
	\vspace{1em}
	{\bf Сложить (Add)}
	\flushright
	\begin{tabularx}{.95\textwidth}{lX}
		Вход: & (b) – объект тип Matrix.\\
		Предусловия: & Число строк и столбцов в суммируемых матрицах должны совпадать\\
		Процесс: & Создаёт новый объект типа Matrix, элементы которого, получены путём сложения элементов объектов this и b с одинаковыми индексами.\\
		Выход: & Объект типа Matrix.\\
	\end{tabularx}
\end{minipage}

\noindent
\begin{minipage}{\textwidth}
	\vspace{1em}
	{\bf Вычесть (Sub)}
	\flushright
	\begin{tabularx}{.95\textwidth}{lX}
		Вход: & (b) – объект тип Matrix.\\
		Предусловия: & Число строк и столбцов в матрицах, участвующих в вычитании, должны совпадать.\\
		Процесс: & Создаёт новый объект типа Matrix, элементы которого, получены путём вычитания элементов объектов this и b с одинаковыми индексами.\\
		Выход: & Объект типа Matrix.
	\end{tabularx}
\end{minipage}

\noindent
\begin{minipage}{\textwidth}
	\vspace{1em}
	{\bf Умножить (Mul)}
	\flushright
	\begin{tabularx}{.95\textwidth}{lX}
		Вход: & (b) – объект типа Matrix.\\
		Предусловия: & Матрицы, участвующие в умножении, должны быть согласованы для этой операции по числу строк и столбцов.\\
		Процесс: & Создаёт новый объект типа Matrix, элементы которого, получены путём умножения элементов объектов this и b в соответствии с правилами перемножения матриц.\\
		Выход: & Объект типа Matrix.
	\end{tabularx}
\end{minipage}

\noindent
\begin{minipage}{\textwidth}
	\vspace{1em}
	{\bf Равно (Eq)}
	\flushright
	\begin{tabularx}{.95\textwidth}{lX}
		Вход: & (b) – объект типа Matrix.\\
		Предусловия: & Число строк и столбцов в матрицах, участвующих в сравнении, должны совпадать.\\
		Процесс: & Возвращает значение true, если элементы объектов this и b на одинаковых позициях равны.\\
		Выход: & Значение типа bool.
	\end{tabularx}
\end{minipage}

\noindent
\begin{minipage}{\textwidth}
	\vspace{1em}
	{\bf Транспонировать (Tran)}
	\flushright
	\begin{tabularx}{.95\textwidth}{lX}
		Вход: & Нет.\\
		Предусловия: & Матрица, подвергаемая транспонированию, должна иметь одинаковое число строк и столбцов.\\
		Процесс: & Создаёт новый объект типа Matrix, элементы которого, получены путём транспонирования элементов объекта this.\\
		Выход: & Объект типа Matrix.
	\end{tabularx}
\end{minipage}

\noindent
\begin{minipage}{\textwidth}
	\vspace{1em}
	{\bf Минимальный элемент(Min)}
	\flushright
	\begin{tabularx}{.95\textwidth}{lX}
		Вход: & Нет.\\
		Предусловия: & Нет.\\
		Процесс: & Отыскивает и возвращает минимальный среди элементов объекта this.\\
		Выход: & Значение типа int.\\
	\end{tabularx}
\end{minipage}

\noindent
\begin{minipage}{\textwidth}
	\vspace{1em}
	{\bf Отобразить(Show)}
	\flushright
	\begin{tabularx}{.95\textwidth}{lX}
		Вход: & Нет.\\
		Предусловия: & Нет.\\
		Процесс: & Отображает на консоль элементы объекта this построчно.\\
		Выход: & Нет.
	\end{tabularx}
\end{minipage}

\noindent
\begin{minipage}{\textwidth}
	\vspace{1em}
	{\bf Взять элемент с индексами i, j}
	\flushright
	\begin{tabularx}{.95\textwidth}{lX}
		Вход: & Значения i, j типа int.\\
		Предусловия: & Значения i, j должны находиться в допустимых диапазонах.\\
		Процесс: & Возвращает элемент матрицы с индексами i, j.\\
		Выход: & Значение типа int.\\
	\end{tabularx}
\end{minipage}

\noindent
\begin{minipage}{\textwidth}
	\vspace{1em}
	{\bf Записать элемент с индексами i, j}
	\flushright
	\begin{tabularx}{.95\textwidth}{lX}
		Вход: & Значения i, j типа int, n — новое значение элемента типа int.\\
		Предусловия: & Значения i, j должны находиться в допустимых диапазонах.\\
		Процесс: & Заменяет элемент матрицы с индексами i, j на значение n.\\
		Выход: & Нет.\\
		Постусловия: & Элемент матрицы с индексами i, j получает значение n.
	\end{tabularx}
\end{minipage}

\chapter*{Описание выполнения}
	\label{chapter:intro}
	\addcontentsline{toc}{chapter}{Описание выполнения}
В качестве языка разработки был выбран C++.
Использовался компилятор g++ версии 5.4.0 с флагами:
{\tt -I.} — для включения текущего каталога в список поиска заголовочных файлов,
{\tt -std=c++11} — для использования стандарта c++11 (обход вектора с помощью \lstinline[basicstyle=\normalsize\ttfamily]{for(auto& el: row)}).
Сборка осуществлялась в дистрибутиве операционной системы GNU с 64-битным ядром Linux 4.10 с помощью утилиты Gnu Make версии 4.1.

При анализе поставленной задачи было принято решение изменить некоторые методы и добавить новые.

Метод класса Add добавляет к текущей матрице указанную, \mbox{т.\,е.} изменяя текущую матрицу, вместо создания новой.
Возвращать функция-член будет ссылку на текущую матрицу, для возможности использования вызова метода в правой части выражений.

Для того, чтобы в классе была возможность суммирования двух матриц без изменений самих матриц, добавлена перегрузка оператора {\tt +}.

Аналогично реализованы методы Sub и Mul.

В силу наличия в классе перегруженных операторов {\tt +}, {\tt -} и {\tt *}, добавлена перегрузка операторов {\tt +=} и {\tt -=}.

Для упрощения разработки добавлен второй конструктор, создающий копию уже существующей матрицы.

Для возможности присваивания добавлена перегрузка оператора {\tt =}.

Добавлен аналог функции-члена Eq перегрузкой оператора {\tt ==}.

Операции «взятие и запись элемента i, j» объединены и реализованы перегрузкой оператора круглые скобки {\tt ()}.
Оператор возвращает ссылку на элемент матрицы, что позволяет как читать, так и записывать значение.
(К сожалению, C++ позволяет для оператора {\tt []} только один аргумент, а индексаторы отсутствуют.)

Из функции-члена транспонирования Tran убрано требование квадратности матрицы, в силу отсутствия такового требования в матричной алгебре.

Добавлены публичные функции-члены получения количества строк и столбцов матрицы (Rows(), Cols()).

Добавлен приватный метод resize, изменяющий размер матрицы с сохранением значений.

При разработке, автор столкнулся с проблемами в ручной реализации изменения размеров динамического двумерного массива.
Было принято решение реализовать внутренние данные матрицы, \mbox{т.\,е.} двумерный массив, вектором векторов из стандартной библиотеки.

Для уменьшения использования памяти все функции-члены принимают матрицы в качестве аргументов ссылками.

В качестве обработки исключений при проверке требований к данным в методах используется макрос assert из стандартной библиотеки.

Отчёт набран в \LaTeX (пакет TeX Live 2015/Debian).
Все исходники доступны в публичном git-репозитории\\
\url{https://bitbucket.org/belomir/matrix.cpp/src}\\
\url{git://git@bitbucket.org:belomir/matrix.cpp.git}\\
а также внедрены в файл отчёта.

\appendix

\chapter*{Заголовочный файл класса}
	\label{chapter:header}
	\addcontentsline{toc}{chapter}{Заголовочный файл класса}
	\lstinputlisting[language=C++, caption=Matrix.h, firstline=7]{Matrix.h}

\chapter*{Реализация класса}
	\label{chapter:cpp}
	\addcontentsline{toc}{chapter}{Реализация класса}
	\lstinputlisting[language=C++, caption=Matrix.cpp, firstline=7]{Matrix.cpp}

\chapter*{Консольное приложение}
	\label{chapter:main}
	\addcontentsline{toc}{chapter}{Консольное приложение}
	\lstinputlisting[language=C++, caption=ConsoleApplicationMatrix, firstline=7]{ConsoleApplicationMatrix.cpp}

\chapter*{Вывод консольного приложения}
	\label{chapter:output}
	\addcontentsline{toc}{chapter}{Вывод консольного приложения}
	\lstinputlisting[caption=output]{output}
	Вывод приложения совпадает с контрольными вычислениями.

\end{document}
